let canvas,context,sprite_preload,fps,lapseColor,objects={},frame=0;function Nwarn(e){console.log("[WARNING]: "+e)}function Ndefault(e){console.log("[DEFAULT]: "+e)}function Nerror(e){console.log("[ERROR]: "+e)}let keyMap={};function NgetKeyMap(){return keyMap}function NkeyDown(e){document.onkeydown=function(n){n=n||window.event,keyMap[n.keyCode]=!0,e()}}function NkeyUp(e){document.onkeyup=function(n){n=n||window.event,keyMap[n.keyCode]=!1,e()}}let loadedSprites={};function NloadSpriteSeries(e){if(null!=e)if("sprite"==e.type)if(null!=e.series)if(null!=e.seriesCount){for(var n=0;n<e.seriesCount;n++)document.getElementsByTagName("head")[0].innerHTML+='<img src="'+sprite_preload+e.series+n+"."+e.seriesType+'" id="'+e.series+n+'" style="display: none;">';for(n=0;n<e.seriesCount;n++)loadedSprites[e.series+n]=document.getElementById(e.series+n)}else Nerror("NloadSpriteSeries => OBJECT -> seriesCount <- is undefined.");else Nerror("NloadSpriteSeries => OBJECT -> series <- is undefined.");else Nerror("NloadSpriteSeries => OBJECT -> type <- is not a sprite.");else Nerror("NloadSpriteSeries => OBJECT is undefined.")}function NcreateCanvas(e){null!=(canvas=document.getElementById(e.id))?null!=e.fps?null!=e["sprite-preload"]?(sprite_preload=e["sprite-preload"],fps=e.fps,context=canvas.getContext("2d"),null!=e.width&&null!=e.height?(canvas.width=e.width,canvas.height=e.height):(Nwarn("NcreateCanvas => OPTIONS -> width <- or -> height <- is undefined."),Ndefault("NcreateCanvas => OPTIONS setting -> width <- and -> height <- to window width and window height."),canvas.width=$(window).width(),canvas.height=$(window).height()),null!=e.lapseColor?(lapseColor=e.lapseColor,context.fillStyle=lapseColor,context.fillRect(0,0,canvas.width,canvas.height)):(Nwarn("NcreateCanvas => OPTIONS -> lapseColor <- is undefined."),Ndefault("NcreateCanvas => OPTIONS setting -> lapseColor <- to #eee."),lapseColor="#eee",context.fillStyle=lapseColor,context.fillRect(0,0,canvas.width,canvas.height))):Nerror("NcreateCanvas => OPTIONS -> sprite-preload <- is undefined."):Nerror("NcreateCanvas => OPTIONS -> fps <- is undefined."):Nwarn("NcreateCanvas => CANVAS is undefined.")}function NdefineObj(e){if(null!=e.name){if(null==e.type)return void Nerror("NdefineObj => OBJECT -> type <- is undefined.");if("sprite"==e.type){if(null==e.series)return void Nerror("NdefineObj => OBJECT -> series <- is undefined.");if(null==e.seriesType)return void Nerror("NdefineObj => OBJECT -> seriesType <- is undefined.");if(null==e.seriesCount)return void Nerror("NdefineObj => OBJECT -> seriesCount <- is undefined.");if(null==e.currentSeries)return void Nerror("NdefineObj => OBJECT -> currentSeries <- is undefined.");Ndefault("NdefineObj => OBJECT setting -> color <- to rgba(0,0,0,0)."),e.color="rgba(0,0,0,0)",context.fillStyle=e.color,null!=e.posx&&null!=e.posy||(Nwarn("NdefineObj => OBJECT -> posx <- or -> posy <- is undefined."),Ndefault("NdefineObj => OBJECT setting -> posx <- and -> posy <- to 0."),e.posx=0,e.posy=0),null!=e.sizex&&null!=e.sizey||(Nwarn("NdefineObj => OBJECT -> sizex <- or -> sizey <- is undefined."),Ndefault("NdefineObj => OBJECT setting -> sizex <- and -> sizey <- to canvas width and canvas height."),e.sizex=canvas.width,e.sizey=canvas.height)}else null!=e.color?context.fillStyle=e.color:(Nwarn("NdefineObj => OBJECT -> color <- is undefined."),Ndefault("NdefineObj => OBJECT setting -> color <- to #000."),e.color="#000",context.fillStyle=e.color),null!=e.posx&&null!=e.posy||(Nwarn("NdefineObj => OBJECT -> posx <- or -> posy <- is undefined."),Ndefault("NdefineObj => OBJECT setting -> posx <- and -> posy <- to 0."),e.posx=0,e.posy=0),null!=e.sizex&&null!=e.sizey||(Nwarn("NdefineObj => OBJECT -> sizex <- or -> sizey <- is undefined."),Ndefault("NdefineObj => OBJECT setting -> sizex <- and -> sizey <- to canvas width and canvas height."),e.sizex=canvas.width,e.sizey=canvas.height);objects[e.name]=e}else Nerror("NdefineObj => OBJECT -> name <- is undefined.")}function NdelObj(e){null!=e.name?null!=objects[e.name]?objects[e.name]=null:Nwarn("NdelObj => OBJECT -> name <- was not found."):Nerror("NdelObj => OBJECT -> name <- is undefined.")}function NgetObj(e){if(null!=e.name)return objects[e.name];Nerror("NgetObj => OBJECT -> name <- is undefined.")}function NisCollided(e,n){return null!=e&&null!=n&&(!(e.posx+e.sizex<=n.posx)&&(!(e.posx>=n.posx+n.sizex)&&(!(e.posy+e.sizey<=n.posy)&&!(e.posy>=n.posy+n.sizey))))}function NisOffScreen(e){return null!=e&&(!(e.posx+e.sizex<=e.sizex)&&(!(e.posx>=canvas.width-e.sizex)&&(!(e.posy+e.sizey<=e.sizey)&&!(e.posy>=canvas.height-e.sizey))))}function NcloneObj(e){return Object.assign({},e)}function NgetCanvas(){return canvas}var spritesLoaded=!1;function NspriteLoop(e,n){if(null!=e)if(null!=n)if(null!=n.framesForChange)if("sprite"==e.type){var i=0;setInterval(function(){++i>=n.framesForChange&&(i=0,NgetObj(e).currentSeries++,character.currentSeries>=character.seriesCount&&(character.currentSeries=0))},1e3/fps)}else Nerror("NspriteLoop => OBJECT -> type <- is undefined.");else Nerror("NspriteLoop => OPTIONS -> framesForChange <- is undefined.");else Nerror("NspriteLoop => OPTIONS is undefined.");else Nerror("NspriteLoop => OBJECT is undefined.")}function NgameLoop(e,n,i){null!=e.logFrame?(i(),setInterval(function(){for(var i in frame++,e.logFrame&&console.log("[FRAME]: "+frame),canvas.width=$(window).width(),canvas.height=$(window).height(),context.fillStyle=lapseColor,context.fillRect(0,0,canvas.width,canvas.height),objects)if(null!=objects[i]){if(context.fillStyle=objects[i].color,"box"==objects[i].type&&context.fillRect(objects[i].posx,objects[i].posy,objects[i].sizex,objects[i].sizey),"circle"==objects[i].type){context.beginPath();var s=objects[i].sizex/2;context.arc(objects[i].posx+objects[i].sizex/2,objects[i].posy+objects[i].sizey/2,s,0,2*Math.PI,!1),context.fill(),context.closePath()}"sprite"==objects[i].type&&spritesLoaded&&context.drawImage(loadedSprites[objects[i].series+objects[i].currentSeries],objects[i].posx,objects[i].posy)}n(),frame>=fps&&(frame=0)},1e3/fps)):Nerror("-> logFrame <- wasn't defined in the Game Loop.")}window.onload=function(){spritesLoaded=!0};